<app-load-indicator [isLoadIndicatorVisible]="modalEventService.loading"></app-load-indicator>

<dx-popup 
    id = "popupTracking"       
    [showTitle]="true"
    title="Seguimiento de Paquete"
    [dragEnabled]="false"
    [closeOnOutsideClick]="false"
    [showCloseButton]="true"
    container=".dx-viewport"        
    position="center"
    (onHiding)="popup_hiding($event)"
    [(visible)]="modalEventService.popupEventVisible">

    <dxi-toolbar-item
      widget="dxButton"
      toolbar="bottom"
      location="after"
    >
        <div *dxTemplate>
            <dx-button icon="fas fa-search-plus" text="Ver MÃ¡s" (onClick)="showDetail(modalEventService.shipmentDocumentId, modalEventService.entity, modalEventService.system, modalEventService.table)">
            </dx-button>
        </div>
    </dxi-toolbar-item>

    <dx-scroll-view width="100%" height="100%">

        <p class="text-center titleTracking">
            {{ modalEventService.origin }} <span class="fas"  [ngClass]="{'fa-ship': modalEventService.way == 'MARITIMA', 'fa-plane': modalEventService.way == 'AEREA'}" ></span> {{ modalEventService.destination }}
        </p>

        <div class="l-container">
            <div class="l-route-line">
                <div class="itinerary">

                </div>
                <div class="itinerary" *ngFor="let item of modalEventService.trackingModal">
                    <!-- Points -->
                    <div class="l-route-line_element l-route-line__element_station ng-star-inserted">
                        <div class="c-station c-station_first ng-star-inserted">
                            <div>
                                <!-- Label -->
                                <div class="l-station-route">
                                    <div class="l-station-route__frame">
                                        <div class="c-station__airport" placement="top">
                                            {{item.VCH_CODE}}
                                        </div>
                                        <div class="c-station__detail" *ngIf="item.CHR_STATE=='C'">
                                            <div class="fas" [class]="item.VCH_ICON">

                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Circle -->
                                <div class="fa fa-circle l-station-bullet c-station-dot ng-star-inserted">

                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Progress -->
                    <div class="l-route-line_element l-route-line__element_segment ng-star-inserted" *ngIf="item.VCH_CODE!='ENTREGADO' && ((modalEventService.trackingModalSelect && item.INT_ITEM<=modalEventService.trackingModalSelect.INT_ITEM && item.CHR_STATE!='C') || ((item.VCH_CODE=='LIM' || item.VCH_CODE=='CLL') && item.CHR_STATE=='C'))">
                        <div class="c-segment ng-star-inserted">
                            <div class="c-segment__shipment">
                                <div class="c-segment__shipment__element_pasted">

                                </div>
                                <div class="l-segment__shipment__icon" *ngIf="item.CHR_STATE=='T'">
                                    <div class="fas" [class]="item.VCH_ICON">

                                    </div>
                                </div>
                                <div class="c-segment__shipment__element_pasted">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="itinerary">

                </div>
            </div>
        </div>

    </dx-scroll-view>
</dx-popup>